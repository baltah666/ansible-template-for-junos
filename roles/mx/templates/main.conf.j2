#jinja2:lstrip_blocks: True
{# this generates MX specific config. It will be merged with the config generated by the common role before it is applied to the MX #}
groups {
  re0 {
    system {
      {# inventory_hostname is an Ansible variable. It contains the hostname learned from the hosts file #}
      host-name {{ inventory_hostname }};
    }
    interfaces {
      fxp0 {
        unit 0 {
          family inet {
            address {{ host.management.ip }}/{{ host.management.mask }};
          }
        }
      }
    }
  }
}
apply-groups [ re0 ];
interfaces {
  {% for ifd, int in host.core_interfaces.items() %}
  {{ ifd }} {
    unit 0 {
      family inet {
        address {{ int.ip }}/{{ int.mask }};
      }
    }
  }
  {% endfor %}
  {% for ifd, int in host.agg_sw_interfaces.items() %}
  {{ ifd }} {
    unit 0 {
      family inet {
        address {{ int.ip }}/{{ int.mask }};
      }
    }
  }
  {% endfor %}
}
