#jinja2:lstrip_blocks: True
{# this generates QFX specific config. It will be merged with the config generated by the common role before it is applied to the QFX #}
system {
  {# inventory_hostname is an Ansible variable. It contains the hostname learned from the hosts file #}
  host-name {{ inventory_hostname }};
}
interfaces {
  em0 {
    unit 0 {
      family inet {
        address {{ host.management.ip }}/{{ host.management.mask }};
      }
    }
  }
  interfaces {
    {% for ifd, int in host.uplinks.items() %}
    {{ ifd }} {
      unit 0 {
        family inet {
          address {{ int.ip }}/{{ int.mask }};
        }
      }
    }
    {% endfor %}
    {% for ifd, int in host.firewall_interfaces.items() %}
    {{ ifd }} {
      unit 0 {
        family inet {
          address {{ int.ip }}/{{ int.mask }};
        }
      }
    }
    {% endfor %}
    {% for ifd, int in host.leaf_interfaces.items() %}
    {{ ifd }} {
      unit 0 {
        family inet {
          address {{ int.ip }}/{{ int.mask }};
        }
      }
    }
    {% endfor %}
  }
}